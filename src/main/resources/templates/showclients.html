<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head th:replace="layout/header:: header" >

</head>

<body>

<div class="container-fluid " >
    <div class="row ">
        <div class="row flex-nowrap">
            <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-light "><!--Abre Barra Lateral-->
                <nav th:replace="layout/menu :: menu"></nav>

                <div class="col py-3 mx-5 ">


                    <form class="navbar-form navbar-left  col-3"   th:action="@{/findclient}" >
                        <div class="input-group"   >
                            <input type="text"   class="form-control" id="searchField" th:value="${searchField}" name="searchField" placeholder="Buscar..." required>
                            <div class="input-group-btn">
                                <button class="btn btn-default" type="submit"><i class="bi bi-search"></i></button>
                            </div>
                        </div>
                    </form>
                    <h3 class="text text-center mb-4">Plantilla</h3>
                    <main layout:fragment= "contenido" role="main" class="container-fluid">




                        <table class="table table-hover ">
                            <tr>
                                <th>Nombre</th>
                                <th>Direccion</th>
                                <th>Nodo</th>
                                <th>IP</th>
                                <th>Editar</th>
                                <th>Suspendido</th>
                                <th>Estado</th>
                                <th>Eliminar</th>
                                <th>Activar/Desactivar</th>


                            </tr>
                            <tr th:each="client: ${clientsToDisplay.entrySet()}">
                                <td th:text="${client.key.name}"></td>
                                <td th:text="${client.key.macAdresss}"></td>
                                <td th:text="${client.key.node.name}"></td>
                                <td th:text="${client.key.node.ipAddresses.ipAddress}"></td>
                                <td>
                                    <a th:href="@{/updateclient/{id}(id=${client.key.id})}" class="btn btn-info">
                                        <i th:class="'bi bi-pencil-square'"></i>
                                    </a>
                                </td>
                                <td class="text-center" ><input type="checkbox" name="active" th:checked="${client.key.disabledClient}" disabled /></td>
                                <td class="text-center">
                                    <button th:classappend="${client.value} ? 'btn btn-info' : 'btn btn-info btn-warning'" th:attr="title=${client.value} ? 'Activo' : 'Inactivo'">
                                        <i th:class="${client.value} ? 'bi bi-wifi' : 'bi bi-wifi-off'"></i>
                                    </button>
                                </td>
                                <td class="text-center">
                                    <form th:action="@{/disableclient/{id}(id=${client.key.id})}" method="post">
                                        <button  class="btn btn-danger" type="submit"><i class="bi bi-trash"></i> </button>
                                    </form>
                                </td>
                                <td class="text-center">
                                    <form  th:action="@{/changestate/{id}(id=${client.key.id})}" method="post">
                                        <button th:classappend="${client.key.disabledClient} ? 'btn btn-warning' : 'btn btn-info'" type="submit">
                                            <i th:classappend="${client.key.disabledClient} ? 'bi bi-toggle-off' : 'bi bi-toggle-on'"></i>
                                        </button>
                                    </form>
                                </td>

                            </tr>
                        </table>


                        <div class="row" th:text="${totalPages.length}">



                        </div>

                        <nav aria-label="Page navigation" th:if="${totalPages.length}>1">
                            <ul class="pagination">
                                <li class="page-item">
                                    <a class="page-link" th:if="${clientsPage.hasPrevious()}" th:href="@{/showclients/(page=${actualPage-1})}">Anterior</a>
                                </li>

                                <li class="page-item">
                                    <a class="page-link" th:if="${clientsPage.number != 0}" th:href="@{/showclients/(page=0)}">Primero</a>
                                </li>

                                <li class="page-item" th:each="i: ${#numbers.sequence(actualPage -3, actualPage + 3)}" th:class="${i == actualPage} ? 'active' : ''">
                                    <a class="page-link" th:if="${i >= 0 && i < clientsPage.totalPages}" th:href="@{/showclients/(page=${i})}" th:text="${i + 1}"></a>
                                </li>

                                <li class="page-item">
                                    <a class="page-link" th:if="${clientsPage.number != clientsPage.totalPages - 1}" th:href="@{/showclients/(page=${clientsPage.totalPages - 1})}">Ultimo</a>
                                </li>

                                <li class="page-item">
                                    <a class="page-link" th:if="${clientsPage.hasNext()}" th:href="@{/showclients/(page=${actualPage+1})}">Proximo</a>
                                </li>
                            </ul>
                        </nav>




       </main><!-- Cierre Contenido-->


            </div>
        </div>
    </div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
        crossorigin="anonymous"></script>

<script th:src="@{/js/responsive-paginate.js}"> </script>


</main>
</body>

</html>